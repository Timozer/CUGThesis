\chapter{使用方法}

\section{在线编译器 Overleaf 使用方法}
\label{sec:overleaf_usage}

\LaTeXe{} 文档需要使用编译器进行编译, 进而输出 PDF文档, 若是自己不想在电脑上安装
对应的编译器, 则可以使用在线编译器 Overleaf 来进行编译.

首先, 需要将模板文件下载到本地, 具体下载方法参见第\ref{sub:mo_ban_xia_zai_} 节的
内容.

然后打开 Overleaf 网站注册一个账号, 如图\ref{fig:overleaf_usage_1}所示,
进入首页, 点击右边的注册按钮.

\begin{tfig}{Overleaf 注册账号1}{fig:overleaf_usage_1}
    \includegraphics[width=.7\textwidth]{./imgs/overleaf_usage/ol_usage_01_rig.png}
\end{tfig}

在接下来的页面中输入邮箱和密码, 点击绿色按钮进行注册.

注册完成后, 在接下来的页面中点击创建一个项目, 选择上传项目,
如图\ref{fig:overleaf_usage_3} 所示.

\begin{tfig}{Overleaf  创建项目1}{fig:overleaf_usage_3}
    \includegraphics[height=.3\textwidth]{./imgs/overleaf_usage/ol_usage_02_create.png}
\end{tfig}

在弹出的窗口中点击绿色按钮, 选择之前下载的模板文件,
如图\ref{fig:overleaf_usage_4}所示.

\begin{tfig}{Overleaf  创建项目2}{fig:overleaf_usage_4}
    \includegraphics[width=.5\textwidth]{./imgs/overleaf_usage/ol_usage_03_upload.png}
\end{tfig}


点击打开, 进入上传页面, 如图\ref{fig:overleaf_usage_6}所示, 静静等待上传完毕.

\begin{tfig}{Overleaf  创建项目3}{fig:overleaf_usage_6}
    \includegraphics[width=.5\textwidth]{./imgs/overleaf_usage/ol_usage_04_upload_2.png}
\end{tfig}

上传完成后, 进入项目页面, 如图\ref{fig:overleaf_usage_7} 所示. 在上传完成后,
Overleaf 会进行一次编译尝试, 因为其默认编译方式与本模板不匹配,
所以如右侧窗口显示, 有很多错误. 这是点击图中左上角的 Menu 按钮,
对本项目进行设置. 如图\ref{fig:overleaf_usage_8}所示, 将编译器设置为 xelatex, 将
主文档设置为 demo.tex .

\begin{tfig}{Overleaf   项目设置1}{fig:overleaf_usage_7}
    \includegraphics[width=.5\textwidth]{./imgs/overleaf_usage/ol_usage_05_failed.png}
\end{tfig}

\begin{tfig}{Overleaf  项目设置 2}{fig:overleaf_usage_8}
    \includegraphics[width=.5\textwidth]{./imgs/overleaf_usage/ol_usage_06_set_complier.png}
\end{tfig}

对项目设置完毕后, 接下来点击左侧文件浏览器中的 demo.tex 文件, 然后点击右侧重新
编译,静静等待一段时间后, 编译成功, 如图\ref{fig:overleaf_usage_10}所示.

\begin{tfig}{Overleaf   编译结果}{fig:overleaf_usage_10}
    \includegraphics[width=.5\textwidth]{./imgs/overleaf_usage/ol_usage_07_success.png}
\end{tfig}

至此, 即可开始自己的写论文之旅了.

如果论文创作者不担心自己的成果泄露的话, 可以使用 Overleaf 来写自己的毕业设计.

注意: 因使用在线编译器导致的论文泄密, 本人概不负责.

\section{系统要求}
\label{sec:xi_tong_yao_qiu_}
本模板是基于 \CTeX{} 宏集中的 ctexbook 文档类进行定制的. 所以如果要使用该模板, 你必须
安装有 \CTeX{} 宏集. 我只知道 Texlive 完全安装包含了该宏集.

除了需要 ctexbook 文档类, 本模板还自动加载了一些必要和不必要的宏包, 如表\ref{tab:packagesautoload}
中所示. 因此你的电脑还必须安装有这些宏包, Texlive 完全安装会自动安装这些宏包.
\begin{ttab}{\cugthesis{} 自动加载的宏包}{tab:packagesautoload}
    \begin{tabular}{>{\bfseries}cl}
        \toprule 
        类别         & 宏包                                                         \\
        \midrule
        模板开发类   & xifthen, xparse, etoolbox                                    \\
        字体类       & xeCJK, fontsec                                               \\
        数学类       & amstext, amsmath, amssymb, amsfonts, mathrsfs, bm, mathtools \\
        插图类       & graphicx, subcaption                                         \\
        表格类       & array, longtable, makecell, tabu, booktabs                   \\
        列表类       & enumitem                                                     \\
        模板         & cugthesisfont                                                \\
        页面布局     & geometry                                                     \\
        目录样式     & tocloft                                                      \\
        超链接       & hyperref, url                                                \\
        浮动环境标题 & caption                                                      \\
        参考文献     & natbib                                                       \\
        \bottomrule
    \end{tabular}
\end{ttab}

本模板目前测试可以正常进行编译的系统环境如表\ref{tab:systems}所示.
\begin{ttab}{系统环境}{tab:systems}
    \begin{tabular}{cl}
        \toprule
        系统类别 & 编译环境            \\
        \midrule 
        Mac OSX  & Texlive2017:xelatex \\
        \bottomrule  
    \end{tabular}
\end{ttab}
\section{下载安装}
\label{sec:xia_zai_an_zhuang_}

\subsection{模板下载}
\label{sub:mo_ban_xia_zai_}
本模板是托管在 Github 上的一个项目, 项目地址: \url{https://github.com/Timozer/CUGThesis}. 你可以
在该网站上下载所有文件.

下载完整地址:

\url{https://github.com/Timozer/CUGThesis/archive/master.zip}

如果你使用 Linux 或者是 Mac OSX 系统, 你可以使用图形界面下载工具来下载, 也可以在终端中使用 wget 或者是 git 来
将它下载到本地. 如下:

\begin{minted}{sh}
wget https://github.com/Timozer/CUGThesis/archive/master.zip
# 或者是
git clone https://github.com/Timozer/CUGThesis.git 
\end{minted}

下载完成后请将压缩包解压, 然后清点一下文件, 看是否残缺, 本模板主要文件如表\ref{tab:templatefiles}所示.
\begin{ttab}{模板主要文件}{tab:templatefiles}
    \begin{tabular}{ll}
        \toprule
        文件名            & 说明                       \\
        \midrule
        cugthesis.cls     & 模板文档类主要文件         \\
        cugthesisfont.sty & 模板字体设置               \\
        authorcv.tex      & 作者简介                   \\
        gbt77140-2005.bst & 参考文献样式               \\
        demo.tex          & 本说明文档的 tex 源码文件  \\
        demo.pdf          & 本说明文档                 \\
        example.tex       & 示例源码文件               \\
        example.pdf       & 示例文档                   \\
        tex.bib           & 本文档引用的参考文献数据库 \\
        ttools.sty        & 小工具宏包                 \\
        tcode.sty         & 代码环境设置               \\
        LICENSE           & 协议文件                   \\
        README.md         & readme                     \\
        Makefile          & make 自动化工具所需文件    \\
        \bottomrule 
    \end{tabular}
\end{ttab}

\subsection{\LaTeX{}系统安装使用}
\label{sub:xi_tong_an_zhuang_shi_yong_}
\subsubsection{Windows \& Linux}
\label{ssub:Windows_Linux}
你可以在华科大开源镜像站获取到 texlive\footnote{\url{http://mirrors.ustc.edu.cn/CTAN/systems/texlive/Images/}}
的镜像文件.

\subsubsection{Mac OSX}
\label{ssub:Mac_OSX}
Mac 用户请使用 MacTex\footnote{\url{https://www.tug.org/mactex/mactex-download.html}}.

\begin{tfig}{MacTeX pkg 下载}{fig:mactexpkg}
    \includegraphics[width=.6\textwidth]{./imgs/mactex.png}
\end{tfig}

然后下载那个 pkg 安装包, 大约有 3.14 GB\@.
\section{模板基本使用}
\label{sec:mo_ban_ji_ben_shi_yong_}
要使用本模板, 您首先得具备基本的 \LaTeX{} 知识, 本模板的存在只是尽可能让你在
具备很少的知识的情况下做出精美的排版. 如果您刚刚接触 \LaTeX{}, 建议您先学习一下
相关的知识. 

什么? 您说啥? 没时间?

OK, 如果您没有很多时间来学习, 您可以先看看 The Not So Short Introduction to 
\LaTeXe{} \cite{oetiker_not_2018} 这篇文档, 大概占用您 139 分钟. 如果您觉得英文
读着费劲, 这里有一篇中文的《一份不太简短的 \LaTeXe{} 介绍》
\footnote{\url{http://ctan.math.illinois.edu/info/lshort/chinese/lshort-zh-cn.pdf}}.
读过这篇文档, 您基本已经会使用 \LaTeX{} 系统了. 接下来您就可以正常使用本模板了.
当然, 如果您在使用模板过程中对 \LaTeX{} 产生了兴趣, 想进一步了解, 您还可以读
《 \LaTeX{} 入门 》\cite{_latex_2013} 这本书.

下面步入正题.

本模板的文档类为 cugthesis, 为了方便使用, 您可以直接在该模板文件夹下创建自己的
文档.

你的文档一开始应该引入模板类, 就像下面这样:
\begin{minted}{tex}
    \documentclass[<option>]{cugthesis}
\end{minted}

本模板提供了一个选项, 意在表明你是什么学位, 博士还是硕士, 学硕还是专硕, 全日制还是
非全日制. 具体说明请查看表\ref{tab:classoptiondegree}.

\begin{ttab}{模板选项}{tab:classoptiondegree}
    \begin{tabular}{ll}
        \toprule
        文档选项            & 说明 \\
        \midrule
        doctor              & 博士 \\
        master              & 硕士 \\
        masterprofulltime   & 全日制专硕 \\
        masterpronofulltime & 非全日制专硕 \\
	    bibsec          & 第二种 bib style, 这种更符合中国地质大学要求         \\
	    figtoc          & 显示图清单           \\
	    tabtoc          & 显示表清单            \\
        \bottomrule
    \end{tabular}
\end{ttab}

比如说我是一个硕士, 我在使用的时候应该像下面这样:
\begin{minted}{tex}
    \documentclass[master]{cugthesis}
\end{minted}

在正确引入模板类后, 你就需要为你的论文添加一些相关信息了, 比如说论文题目, 论文作者, 
指导老师等.

模板为你提供了几个命令用来设置这些, 相关命令如表\ref{tab:cugthesisinfocmds}所示.
\begin{ttab}{论文相关信息命令}{tab:cugthesisinfocmds}
    \begin{tabular}{lll}
        \toprule
        命令 & 作用 & 用法 \\
        \midrule
        \tcodeinline{tex}{\cugthesistitle} & 论文标题 & \tcodeinline{tex}{\cugthesistitle{cntitle}{entitle}} \\
        \tcodeinline{tex}{\cugthesismajor} & 专业 & \tcodeinline{tex}{\cugthesismajor{cnmajor}{enmajor}} \\
        \tcodeinline{tex}{\cugthesisteacher} & 指导老师 & \tcodeinline{tex}{\cugthesisteacher{cnname}{enname}} \\
        \tcodeinline{tex}{\cugthesisauthor} &  作者姓名 & \tcodeinline{tex}{\cugthesisauthor{cnname}{enname}} \\
        \tcodeinline{tex}{\studentid} & 学号 & \tcodeinline{tex}{\studentid{1201711347}} \\
        \tcodeinline{tex}{\educatingunit} & 培养单位 & \tcodeinline{tex}{\educatingunit{计算机学院}} \\
        \tcodeinline{tex}{\cugthesisdate} & 时间 & \tcodeinline{tex}{\cugthesisdate{2018}{3}} \\
        \bottomrule
    \end{tabular}
\end{ttab}

然后你就应该像下面这样输入代码:
\begin{minted}{tex}
    \cugthesistitle{中国地质大学研究生学位论文 \LaTeXe{} 模板}{\cugthesis \LaTeXe{} 模板}
    \cugthesisauthor{王震宇}{Zhenyu Wang}
    \studentid{1201711347}
    \cugthesismajor{计算机科学与技术}{Computer Science}
    \cugthesisteacher{蔡之华}{Zhihua Cai}
    \educatingunit{计算机学院}
    \cugthesisdate{2018}{3}
\end{minted}

顺序无关紧要, 你可以根据你的喜好随意安排.

然后就是开始你的正文了. 请将你的正文放入 document 环境中, 如下:
\begin{minted}{tex}
    \begin{document}
        % 你的正文
    \end{document}
\end{minted}

你的论文的摘要, 关键字等可以通过模板提供的相关命令来写, 具体命令如表\ref{tab:abstractcmds}所示.
\begin{ttab}{摘要相关命令}{tab:abstractcmds}
    \begin{tabular}{ll}
        \toprule
        命令 & 用法 \\
        \midrule
        \tcodeinline{tex}{\cugabstract} & \tcodeinline{tex}{\cugabstract{这里是中文摘要}{Here is english abstract}} \\
        \tcodeinline{tex}{\cugkeywords} & \tcodeinline{tex}{\cugkeywords{关键字}{Keywords}} \\
        \bottomrule
    \end{tabular}
\end{ttab}

你的摘要应该像下面这样:
\begin{minted}{tex}
    \cugabstract{中文摘要}{English Abstract}
    \cugkeywords{关键字}{Keywords} 
\end{minted}

接下来就是让 \LaTeX{} 生成论文正文前面的这些页面了, 比如说题名页, 原创性声明, 导师承诺书, 授权书, 摘要,
目录, 插图清单, 表格清单等.
你可以使用\tcodeinline{tex}{\makefrontpages}来生成. 这个是模板提供的命令.

然后你就开始写你的正文. 当你的正文写完后, 需要些致谢, 参考文献这些的时候, 需要用\tcodeinline{tex}{\backmatter}
命令来开启章节不编号功能. 当你需要为你的论文添加附录的时候, 你需要使用\tcodeinline{tex}{\appendix}命令来开启
章节字母编号功能.

最后, 你的整个论文源码应该类似下面这样:
\begin{minted}{tex}
    \documentclass[master]{cugthesis}

    \cugthesistitle{中国地质大学研究生学位论文 \LaTeXe{} 模板}{\cugthesis \LaTeXe{} 模板}
    \cugthesisauthor{王震宇}{Zhenyu Wang}
    \studentid{1201711347}
    \cugthesismajor{计算机科学与技术}{Computer Science}
    \cugthesisteacher{蔡之华}{Zhihua Cai}
    \educatingunit{计算机学院}
    \cugthesisdate{2018}{3}

    \begin{document}
        \cugabstract{中文摘要}{English Abstract}
        \cugkeywords{关键字}{Keywords} 
        \makefrontpages 
        % 你的正文
        \chapter{这是第一章}
            % 更多内容
        \section{这是一级标题}
            % 更多内容
        \subsection{这是二级标题}
            % 更多内容

        \backmatter
        \chapter{致谢}
            % 致谢内容
        \cugthesisbib{参考文献数据库文件名}

        \appendix
        \chapter{这是附录A}
            % 这里是附录内容
    \end{document}
\end{minted}

基本使用说明到此为止, 祝您好运!
